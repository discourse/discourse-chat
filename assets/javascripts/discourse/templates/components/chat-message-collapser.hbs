<div class="chat-message-collapser">
  {{#if uploads}}
    {{html-safe cooked}}
  {{/if}}

  <div class="chat-message-collapser-header">
    {{#if uploads}}
      <span class="chat-message-collapser-filename">
        {{filename}}
      </span>
    {{else}}
      <a
        target="_blank"
        class="chat-message-collapser-link"
        rel="noopener noreferrer"
        href={{link}}
      >
        {{title}}
      </a>
    {{/if}}

    {{#if collapsed}}
      {{d-button
        action=(action "open")
        icon="caret-right"
        class="chat-message-collapser-button chat-message-collapser-close"
      }}
    {{else}}
      {{d-button
        action=(action "close")
        icon="caret-down"
        class="chat-message-collapser-button chat-message-collapser-open"
      }}
    {{/if}}
  </div>

  {{#unless collapsed}}
    {{#if uploads}}
      <div class="chat-uploads">
        {{#each uploads as |upload|}}
          {{chat-upload upload=upload}}
        {{/each}}
      </div>
    {{else}}
      {{html-safe cooked}}
    {{/if}}
  {{/unless}}
</div>
