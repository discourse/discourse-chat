<div class="tc-drawer">
  <div class={{containerClassNames}}>
    <div class="topic-chat-drawer-header">

      {{#if chatView}}
        {{flat-button icon="chevron-left" action=(action "openChat") title="chat.return_to_list"}}
        <a href={{activeChannel.chatable_url}} class="tc-title-seg">
          {{#if activeChannel}}
            {{chat-channel-title channel=activeChannel}}
            {{#if showUnreadMessageCount}}
              <span class="tc-unread-count">{{unreadMessageCount}}</span>
            {{/if}}
          {{/if}}
        </a>
      {{else}}
        <div class="tc-title-seg">
          <span class="tc-branding">{{i18n "chat.list"}}</span>
        </div>

      {{/if}}

      {{flat-button icon=this.expandIcon class="tc-expand" action=(action "toggleExpand") title="chat.collapse"}}
      {{#if showClose}}
        {{flat-button icon="times" action=(action "close") title="chat.close"}}
      {{/if}}
    </div>
    <div class="topic-chat-drawer-content">
      {{#if chatView}}
        {{#if (and this.activeChannel markdownItLoaded)}}
          {{chat-live-pane
            chatChannel=activeChannel
            newMessageCb=(action "newMessageCb")
            expanded=this.expanded
          }}
        {{/if}}
      {{else}}
        <div class="tc-channels">
          {{#each channels as |channel|}}
            {{chat-channel-row channel=channel switchChannel=(action "switchChannel")}}
          {{/each}}
        </div>
      {{/if}}
    </div>
  </div>
</div>
